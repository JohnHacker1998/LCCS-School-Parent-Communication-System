@model LCCS_School_Parent_Communication_System.viewModels.assignmentViewModel
@{
    ViewBag.Title = "assignmentManagement";
}
@*<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>*@

<div class="modal" id="myModal" role="dialog" data-backdrop="static" tabindex="-1"></div>
<script>
    $(document).ready(function () {
        $('#tblAssignmentList').DataTable();
    });
</script>

@*@using (Html.BeginForm("assignmentManagement", "THome", FormMethod.Post, new { @enctype = "multipart/form-data" }))
{
    @Html.HiddenFor(a => a.assignmentID);

    @Html.LabelFor(a => a.assignmentType);
    <select id="assignmentType" name="assignmentType" readonly class="form-control">
        @foreach (var i in Model.assignmentType)
        {
            if (i == ViewBag.selectedType)
            {
                <option value=@i selected>@i</option>
            }
            else
            {
                <option value=@i>@i</option>
            }
        }
    </select>

    <div id="groupRelated" style="display:none">
        @Html.LabelFor(a => a.numberOfGroupMembers);
        @Html.EditorFor(a => a.numberOfGroupMembers);
    </div>
    @Html.LabelFor(a => a.sectionID)
    <select id="sectionName" name="sectionName" readonly class="form-control">
        @foreach (var i in Model.sectionList)
        {
            if (i == ViewBag.selectedSection)
            {
                <option value=@i selected>@i</option>
            }
            else
            {
                <option value=@i>@i</option>
            }
        }
    </select>
    @Html.LabelFor(a => a.submissionDate);
    @Html.EditorFor(a => a.submissionDate, new { htmlAttributes = new { @class = "datepicker form-control" } });

    @Html.LabelFor(a => a.assignmentDocument);
    <input type="file" name="file" class="form-control" />
    <input type="submit" name="add" value="Add" />
    <input type="submit" name="update" value="Update" />


}*@

@*<script type="text/javascript">

        $(document).ready(function () {
            var view = $('#myModal');
            $('[data-toggle="modal"]').click(function () {
                var url = $(this).data('url');
                $.get(url).done(function (data) {
                    view.html(data);
                    view.modal('show');
                });
            });
            $('[data-toggle="updateModal"]').click(function () {
                var url = $(this).data('url') + '?id=' + $(this).data('id');
                $.get(url).done(function (data) {
                    view.html(data);
                    view.modal('show');
                });
            });
            view.on('click', '[data-save="modal"]', function (event) {

                var form = $(this).parents('.modal').find('form');
                var actionUrl = form.attr('action');
                var sendData = form.serialize();
                $.validator.unobtrusive.parse("#error");
                ValidationForm();
                if (ValidationForm()) {
                    $.post(actionUrl, sendData).done(function (data) {
                        //view.modal('hide');
                        view.html(data);
                        view.modal('show');
                    });
                }

            });

            view.on('click', '[data-dismiss="modal"]', function (event) {
                view.modal('hide');
            });


            function ValidationForm() {
                if (!$("#error").valid()) {
                    return false;
                }
                else {
                    return true;
                }
            }
        });

    </script>*@



<div class="container mb-3 mt-3">
    <table class="table table-striped table-bordered" id="tblAssignmentList">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">SectionID</th>
                <th scope="col">Section</th>
                <th scope="col">Assignment Type</th>
                <th scope="col">Submission Date</th>

                <th scope="col">Number of Members</th>
                <th scope="col">Assignment Name</th>
                <th scope="col">Mark Percentage</th>

                <th scope="col">
                    @using (Html.BeginForm("addAssignment", "THome", FormMethod.Get))
                    {
                        <input type="submit" name="add" value="Add" />
                    }
                </th>
            </tr>
        </thead>

        @foreach (var k in Model.listAssignment)
        {
            <tbody>
                <tr>
                    <td>@k.assignmentId</td>
                    <td>@k.sectionID</td>
                    <td>@k.section.sectionName</td>
                    <td>@k.assignmentType</td>
                    <td>@k.submissionDate.ToShortDateString()</td>

                    <td>@k.numberOfMembers</td>
                    <td>@k.assignmentName</td>
                    <td>@k.markPercentage</td>

                    <td>
                        @using (Html.BeginForm("assignmentManagement", "THome", new { assId = k.assignmentId.ToString() }, FormMethod.Post))
                        {

                            <input type="submit" name="delete" value="Delete" class="btn btn-danger" />
                            <input type="submit" name="select" value="Select" class="btn btn-primary" />

                        }
                        @* <button type="button" class="btn btn-primary" data-toggle="updateModal" data-target="#AcademicYearViewModel" data-url="@Url.Action("updateAssignment")" data-id="@k.assignmentId.ToString()">Edit</button>*@
                        @*
                            @if (k.assignmentType == "Group" && k.groupList == null)
                            {

                                <input type="submit" class="btnModal btn btn-primary" id="btnModal" value="Create Group" />

                            }*@
                    </td>
                </tr>
            </tbody>

        }

    </table>


</div>


